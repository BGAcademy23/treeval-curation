{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"The Treeval pipeline: Generating evidence for manual curation","text":"<p>This session is part of Biodiversity Genomics Academy 2023</p>"},{"location":"#session-leaders","title":"Session Leader(s)","text":"<p>Tree of Life Assembly, Wellcome Sanger Institute</p> <ul> <li>Damon-Lee Pointon</li> <li>Ying Sims</li> <li>Will Eagles</li> </ul>"},{"location":"#description","title":"Description","text":"<p>TreeVal is a pipeline created to generate supplemental information which will aid in the curation of high-quality genomes.</p> <p>By the end of this session you will be able to:</p> <ol> <li>Install the treeval-pipeline on your own system</li> <li>Understand the data currently required for TreeVal</li> <li>Start a treeval and curationpretext run</li> <li>Understand what the different components of the pipeline do</li> <li>Upload results to JBrowse and look at our data.</li> </ol>"},{"location":"#tutorial","title":"Tutorial","text":""},{"location":"#prerequisites","title":"Prerequisites","text":"<ol> <li>Understanding of the terms genome assembly, genome curation, HiC, genome browsers</li> <li>Familiarity with linux command line basics (cd, mv, rm)</li> <li>An understanding of pipelines (especially Nextflow) will be helpful</li> </ol> <p>Please make sure you MEET THE PREREQUISITES and READ THE DESCRIPTION above</p> <p>You will get the most out of this session if you meet the prerequisites above.</p> <p>Please also read the description carefully to see if this session is relevant to you.</p> <p>If you don't meet the prerequisites or change your mind based on the description or are no longer available at the session time, please email tol-training at sanger.ac.uk to cancel your slot so that someone else on the waitlist might attend.</p>"},{"location":"Tutorial/","title":"Hello","text":"<p>and welcome to the TreeVal Curation workshop </p> <p>I'm Damon and i'll be going through the vast majority of this workshop with you.</p> <p>Yumi will be here answering the questions I can't, and Will will be in the chat.</p> <p>We have put alot of work into TreeVal so hopefully you'll find it incredibly helpful for your own project. Keep in mind that this course does run with the hope you attend the workshop by GRIT, who will show you how this data is used and how to manually curate your genome.</p>"},{"location":"Tutorial/#the-tutorial","title":"The Tutorial","text":"<p>1, We will be using GitPod for this tutorial so SEND ME TO GITPOD!.</p> <p>2, The Nextflow command:</p> <pre><code>nextflow_cmd run treeval/main.nf \\\n-profile singularity \\\n--input treeval/assets/local_testing/nxOscDF5033-BGA.yaml \\\n--outdir OscDF5033-TEST \\\n-entry RAPID\n</code></pre> <ul> <li>Yes, normally you would just be calling <code>nextflow</code>, however, we had an issue with adding nextflow to path.</li> </ul> Secrets     Shhh... Nextflow won't actually run here, but this is an exercise in showing you how little you need to do to get it running  <p>3, Uploading to JBrowse</p> <p><pre><code>cd jbrowse2\n\njbrowse add-assembly /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/ilTolViri5_1.fa -a ilTor --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/ilTolViri5_1_ancestral.bigBed -a ilTor -n ancestral_busco --category Busco --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/ilTolViri5_1_buscogene.bigBed -a ilTor -n standard_busco --category Busco --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/ilTolViri5_1_selfcomp.bigBed -a ilTor -n selfcomp --category selfcomp --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/telo_ilTolViri5_1.bed.gz -a ilTor -n telomere --category Alignments --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/gap_ilTolViri5_1.bed.gz -a ilTor -n gap --category Alignments --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/BSPQI.bigBed -a ilTor -n BSPQI --category Enzymes_Digest --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/BSSSI.bigBed -a ilTor -n BSSSI --category Enzymes_Digest --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/DLE1.bigBed -a ilTor -n DLE1 --category Enzymes_Digest --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/hic_files/ilTolViri5_1.hic -a ilTor -n HIC --category Mapping --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/DanausPlexippus.Dpv3_pep.gff.gz -a ilTor -n DanPlexPeptide --category Alignments --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/DanausPlexippus.Dpv3_cdna.bigBed -a ilTor -n DanPlexCDNA --category Alignments --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/DanausPlexippus.Dpv3_cds.bigBed -a ilTor -n DanPlexCDS --category Alignments --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/DanausPlexippus.Dpv3_rna.bigBed -a ilTor -n DanPlexRNA --category Alignments --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/MelitaeaCinxia.ilMelCinx1_pep.gff.gz -a ilTor -n MelCinPEP --category Alignments --load copy\n\njbrowse add-track /workspace/treeval-curation/ilTorViri5-BGA/treeval_upload/HeliconiusMelpomene.ASM31383v2_cdna.bigBed -a ilTor -n HelMelPEP --category Alignments --load copy\n\ncd ../\n</code></pre>   - You'll notice that the HiC and punchlist files, aren't listed here. This is because they were rather difficult to get working on the GitPod. I can show this off if you like though.</p> <p>4, Uploading to Higlass</p> <p>You will have to close any current higlass tabs you have open, navigate to the gitpod window, ports and open a new higlass window.</p> <pre><code>cd /workspace/treeval-curation/ilTorViri5-BGA/hic_files/\n\ncp {ilTolViri5_1.mcool,../treeval_upload/ilTolViri5_1.genome,ilTolViri5_1_coverage.bigWig,ilTolViri5_1_repeat_density.bigWig,ilTolViri5_1_gap.bed,ilTolViri5_1_telomere.bed} /tmp/higlass-docker/\n\ncd ../../\n\nhiglass-manage ingest /tmp/higlass-docker/ilTolViri5_1.mcool --assembly ilTorViri5_1 --project-name TreeVal-test\n\nhiglass-manage ingest --filetype chromsizes-tsv --datatype chromsizes --assembly ilTorViri5_1 /tmp/higlass-docker/ilTolViri5_1.genome --project-name TreeVal-test\n\nhiglass-manage ingest /tmp/higlass-docker/ilTolViri5_1_coverage.bigWig --assembly ilTorViri5_1 --project-name TreeVal-test\n\nhiglass-manage ingest /tmp/higlass-docker/ilTolViri5_1_repeat_density.bigWig --assembly ilTorViri5_1 --project-name TreeVal-test\n\nclodius aggregate bedfile --chromsizes-filename /tmp/higlass-docker/ilTolViri5_1.genome /tmp/higlass-docker/ilTolViri5_1_gap.bed \n\nhiglass-manage ingest /tmp/higlass-docker/ilTolViri5_1_gap.bed.beddb --datatype bedlike --filetype beddb --assembly ilTorViri5_1 --project-name TreeVal-test\n\nclodius aggregate bedfile --chromsizes-filename /tmp/higlass-docker/ilTolViri5_1.genome /tmp/higlass-docker/ilTolViri5_1_telomere.bed\n\nhiglass-manage ingest /tmp/higlass-docker/ilTolViri5_1_telomere.bed.beddb --datatype bedlike --filetype beddb --assembly ilTorViri5_1 --project-name TreeVal-test\n</code></pre> <p>5, CurationPretext</p> <p>This pipeline can be run like such:</p> <pre><code>nextflow_cmd run curationpretext/main.nf -profile singularity --input /workspace/treeval-curation/Oscheius_DF5033/genomic_data/Oscheius_DF5033.fa --pacbio /workspace/treeval-curation/Oscheius_DF5033/pacbio/ --cram /workspace/treeval-curation/Oscheius_DF5033/hic-arima2/ --outdir pretext_full -entry ALL_FILES\n</code></pre> <pre><code>nextflow_cmd run curationpretext/main.nf -profile singularity --input /workspace/treeval-curation/Oscheius_DF5033/genomic_data/Oscheius_DF5033.fa --cram /workspace/treeval-curation/Oscheius_DF5033/hic-arima2 --outdir pretext_maps -entry MAPS_ONLY\n</code></pre> Secrets     Shhh... Nextflow won't actually run here, but this is an exercise in showing you how little you need to do to get it running"}]}